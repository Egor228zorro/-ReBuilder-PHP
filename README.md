ReBuilder - Монорепозиторий микросервисов
1. О проекте
ReBuilder — это система, состоящая из нескольких микросервисов, разработанных для управления тренировками и озвучкой упражнений в рамках фитнес-платформы. Этот монорепозиторий содержит исходный код для всех микросервисов, обеспечивая единое место для разработки, тестирования и деплоя. Основные цели проекта:

Обеспечение модульной архитектуры для управления различными аспектами фитнес-платформы.

Упрощение разработки и интеграции между микросервисами.

Предоставление удобного API для взаимодействия с системой.

В данный момент репозиторий включает три основных микросервиса:

Training Service: Управление тренировками, упражнениями и их связями.

Text-to-Speech Service: Генерация озвучки для тренировок.

API Gateway: Единая точка входа и маршрутизация запросов.

2. Микросервисы
2.1 Training Service
Назначение
Training Service — это микросервис, отвечающий за управление тренировками и упражнениями. Его основные функции включают:

Создание и управление тренировками с упражнениями.

Хранение каталога упражнений с описаниями и медиа-контентом.

Настройки озвучки для пользовательских тренировок.

Управление связями между тренировками и упражнениями.

Технологии и фреймворки

PHP 8.2+: Основной язык для разработки микросервиса.

PostgreSQL: База данных для хранения тренировок и упражнений.

Slim Framework: Минималистичный PHP фреймворк для создания API.

PDO: Для работы с базой данных.

PHPUnit: Для юнит-тестирования.

Взаимодействие с другими микросервисами

Text-to-Speech Service: Отправляет запросы на генерацию озвучки для тренировок.

API Gateway: Получает запросы от клиентов через единую точку входа.

Основные эндпоинты

GET /health: Проверка работоспособности сервиса и подключения к БД.

GET /workouts: Получение списка тренировок с пагинацией.

POST /workouts: Создание новой тренировки.

GET /workouts/{id}: Получение детальной информации о тренировке с упражнениями.

Способы запуска

bash
cd training-service
composer install
php migrations/migrate.php
php -S localhost:8081 -t public
2.2 Text-to-Speech Service
Назначение
Text-to-Speech Service — это микросервис для генерации аудио-озвучки тренировок. Его роль заключается в преобразовании текстовых описаний упражнений в аудиофайлы для голосового сопровождения тренировок.

Технологии и фреймворки

PHP 8.2+: Основной язык для разработки.

Slim Framework: Для создания REST API.

Внешние TTS API: Интеграция с облачными сервисами озвучки.

Взаимодействие с другими микросервисами

Training Service: Получает тексты упражнений для озвучки.

API Gateway: Предоставляет API для клиентских приложений.

Основные эндпоинты

GET /health: Проверка работоспособности сервиса.

POST /tts/generate: Генерация озвучки для переданного текста.

Способы запуска

bash
cd text-to-speech-service
composer install
php -S localhost:8082 -t public
2.3 API Gateway
Назначение
API Gateway — это микросервис, выступающий в роли единой точки входа для всех клиентских приложений. Его основные функции включают:

Маршрутизацию запросов к соответствующим микросервисам.

Обеспечение единого интерфейса для клиентов.

Централизованное управление аутентификацией и авторизацией (планируется).

Технологии и фреймворки

PHP 8.2+: Основной язык для разработки.

Slim Framework: Для создания прокси-сервера.

Основные эндпоинты

GET /health: Проверка работоспособности всех подключенных сервисов.

GET /api/training/*: Прокси к Training Service.

POST /api/tts/*: Прокси к Text-to-Speech Service.

Способы запуска

bash
cd api-gateway
composer install
php -S localhost:8080 -t public
3. Архитектура и зависимости
Общая архитектура
ReBuilder использует микросервисную архитектуру, где каждый сервис отвечает за свою предметную область. Микросервисы взаимодействуют через REST API. Сервисы разрабатываются на различных технологиях в зависимости от их назначения.

Используемые внешние сервисы

PostgreSQL: Используется как основная база данных для хранения информации о тренировках и упражнениях (в Training Service). Настройки подключения указаны в config/database.php.

Внешние TTS API: Используются для генерации аудио-озвучки в Text-to-Speech Service.

Переменные окружения
Для запуска микросервисов необходимо настроить следующие переменные окружения:

Training Service
Создайте файл training-service/.env или отредактируйте config/database.php:

env
DB_HOST=localhost
DB_PORT=5432
DB_NAME=training_db
DB_USER=postgres
DB_PASS=postgres
Text-to-Speech Service
Создайте файл text-to-speech-service/.env:

env
TTS_API_KEY=ваш_api_ключ
TTS_API_URL=https://api.tts-service.com
Эти настройки можно переопределить через переменные окружения системы.

4. Как тестировать
Команды для запуска тестов

Для Training Service:

bash
cd training-service
composer require --dev phpunit/phpunit
vendor/bin/phpunit
Тесты покрывают основные сценарии работы с API для каждого микросервиса, включая:

Unit-тесты для проверки бизнес-логики

Интеграционные тесты для проверки работы с базой данных

Тесты миграций базы данных

Проверка работоспособности

bash
# Проверка базы данных
php training-service/check_db.php

# Проверка миграций
php training-service/migrations/migrate.php
5. Контакты 
Автор: Егор Мартынов (GitHub: Egor228zorro)



GitHub Issues: Создать issue

Репозиторий проекта: https://github.com/Egor228zorro/-ReBuilder-PHP
